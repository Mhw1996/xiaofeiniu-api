SET NAMES UTF8;
DROP DATABASE IF EXISTS xiaofeiniu;
CREATE DATABASE xiaofeiniu CHARSET=UTF8;
USE xiaofeiniu;

/*管理员*/
CREATE TABLE xfn_admin(
  aid INT PRIMARY KEY AUTO_INCREMENT,
  aname VARCHAR(32) UNIQUE,
  apwd VARCHAR(64)
);
INSERT INTO xfn_admin VALUES
(NULL, 'admin', PASSWORD('123456')),
(NULL, 'boss', PASSWORD('999999'));

/*全局设置*/
CREATE TABLE xfn_settings(
  sid INT PRIMARY KEY AUTO_INCREMENT,
  appName VARCHAR(32),
  apiUrl VARCHAR(64),
  adminUrl VARCHAR(64),
  appUrl VARCHAR(64),
  icp VARCHAR(64),
  copyright VARCHAR(128)
);
INSERT INTO xfn_settings VALUES
(NULL, '小肥牛', 'http://127.0.0.1:8090', 'http://127.0.0.1:8091', 'http://127.0.0.1:8092', '京ICP备12003709号-3', 'Copyright © 北京达内金桥科技有限公司版权所有');

/*桌台表*/
CREATE TABLE xfn_table(
  tid INT PRIMARY KEY AUTO_INCREMENT,
  tname VARCHAR(32),
  type VARCHAR(32),
  status INT
);
INSERT INTO xfn_table VALUES
(1, '金镶玉', '2人桌', 1),
(2, '玉如意', '2人桌', 1),
(3, '齐天寿', '6人桌', 3),
(5, '福临门', '4人桌', 2),
(6, '全家福', '6人桌', 3),
(7, '展宏图', '2人桌', 1),
(8, '万年长', '8人桌', 1),
(9, '百事通', '4人桌', 3),
(10, '满堂彩', '10人桌', 2),
(11, '鸿运头', '8人桌', 1),
(12, '福满堂', '12人桌', 1),
(13, '高升阁', '4人桌', 3),
(15, '乐逍遥', '2人桌',3);

/*桌台预定信息*/
CREATE TABLE xfn_reservation(
  rid INT PRIMARY KEY AUTO_INCREMENT,
  contactName VARCHAR(32),
  phone VARCHAR(16),
  contactTime BIGINT,
  dinnerTime BIGINT,
  tableId INT,
  FOREIGN KEY(tableId) REFERENCES xfn_table(tid)
);
INSERT INTO xfn_reservation VALUES
(NULL, '丁丁', '13501234561', '1548311700000', '1549011000000', '1'),
(NULL, '当当', '13501234562', '1548311710000', '1549011100000', '1'),
(NULL, '豆豆', '13501234563', '1548311720000', '1549011200000', '2'),
(NULL, '丫丫', '13501234564', '1548311730000', '1549011300000', '2'),
(NULL, '丁丁', '13501234565', '1548311740000', '1549011400000', '3'),
(NULL, '当当', '13501234566', '1548311750000', '1549011500000', '3'),
(NULL, '豆豆', '13501234561', '1548311760000', '1549011600000', '5'),
(NULL, '丫丫', '13501234562', '1548311770000', '1549011700000', '5'),
(NULL, '丁丁', '13501234563', '1548311780000', '1549011800000', '6'),
(NULL, '当当', '13501234564', '1548311790000', '1549011900000', '6'),
(NULL, '豆豆', '13501234565', '1548311800000', '1549011000000', '7'),
(NULL, '丫丫', '13501234566', '1548311810000', '1549011100000', '8'),
(NULL, '豆豆', '13501234567', '1548311820000', '1549011200000', '9'),
(NULL, '丫丫', '13501234561', '1548311840000', '1549011300000', '10'),
(NULL, '丁丁', '13501234562', '1548311850000', '1549011400000', '10'),
(NULL, '当当', '13501234563', '1548311860000', '1549011500000', '11'),
(NULL, '豆豆', '13501234564', '1548311870000', '1549011600000', '11'),
(NULL, '丫丫', '13501234565', '1548311880000', '1549011600000', '12'),
(NULL, '豆豆', '13501234566', '1548311890000', '1549011500000', '13'),
(NULL, '当当', '13501234567', '1548311900000', '1549011300000', '13'),
(NULL, '丫丫', '13501234568', '1548311910000', '1549011200000', '15');

/*菜品类别*/
CREATE TABLE xfn_category(
  cid INT PRIMARY KEY AUTO_INCREMENT,
  cname VARCHAR(32)
);
INSERT INTO xfn_category VALUES
(1, '肉类'),
(2, '海鲜河鲜'),
(3, '丸滑类'),
(4, '蔬菜豆制品'),
(5, '菌菇类');

/*菜品*/
CREATE TABLE xfn_dish(
  did INT PRIMARY KEY AUTO_INCREMENT,
  title VARCHAR(32),
  imgUrl VARCHAR(128),
  price DECIMAL(6,2),
  detail VARCHAR(128),
  categoryId INT,
  FOREIGN KEY(categoryId) REFERENCES xfn_category(cid)
);
INSERT INTO xfn_dish VALUES
(100000, '招牌虾滑', 'CE7I69481.jpg', '35', '精选湛江、北海区域出产的南美品种白虾虾仁，配以盐和淀粉等调料制作而成。虾肉含量越高，虾滑口感越纯正。相比纯虾肉，虾滑食用方便、入口爽滑鲜甜Q弹，海底捞独有的定制生产工艺，含肉量虾肉含量93%，出品装盘前手工摔打10次，是火锅中的经典食材。', '1'),
(NULL, '捞派无刺巴沙鱼', 'CE7I6948.jpg', '15', '巴沙鱼是东南亚淡水鱼品种。越南音译为卡巴沙(CABaSa)，意思是三块脂肪鱼，因为该鱼在生长过程中，腹腔积累有三块较大的油脂，约占体重的58%。 海底捞选用越南湄公河流域养殖的巴沙鱼。经工厂低温车间宰杀、快速去皮等工艺加工成鱼柳，包装速冻，再通过海底捞中央厨房加工腌制而成。巴沙鱼口味鲜嫩，且无刺无腥味，特别适合老人、小孩食用。', '1');
INSERT INTO xfn_dish VALUES(NULL, '捞派黄喉', 'EU0A0112.jpg', '20', '黄喉主要是猪和牛的大血管，以脆爽见长，是四川火锅中的经典菜式。捞派黄喉选用猪黄喉，相比牛黄喉，猪黄喉只有30cm可用，肉质比牛黄喉薄，口感更脆。 捞派黄喉，通过去筋膜、清水浸泡15小时以上，自然去除黄喉的血水和腥味。口感脆嫩弹牙，是川味火锅的经典菜式。', '1'),
(NULL, '千层毛肚', 'CE7I8900.jpg', '40', '选自牛的草肚，加入葱、姜、五香料一起煮熟后切片而成。五香味浓、耙软化渣。锅开后再煮3分钟左右即可食用。', '1'),
(NULL, '旭伟蟹肉墨鱼滑', '1-CE7I8970.jpg', '29', '将冰鲜墨鱼筒，经破碎、搅拌等工艺，再配以秘制调料，嵌入鲜毛蟹中。锅开后再煮4分钟左右即可食用。配上丸滑蘸碟，风味更突出。', '2'),
(NULL, '兆湛撒尿牛肉丸', 'EU0A0225.jpg', '36', '选用牛后腿部位牛霖，经过排酸、绞碎、搅打成的牛肉滑，捏成丸子后，里面裹入用老鸡、火腿等精心熬制的汤冻。锅开后浮起来再煮3分钟左右即可食用。配上丸滑蘸碟，风味更突出。撒尿牛丸中心汤汁温度较高，吃时小心被汤汁烫到。', '2'),
(NULL, '西式牛肉滑', 'CE7I9010.jpg', '48', '选用牛后腿部位，经过排酸、绞碎、搅打而成的牛肉滑，放入香菇、芹菜粒等原料，配以蛋黄。开锅后由服务员搅拌均匀、做成小丸下入，浮起来再煮3分钟左右即可食用。配上丸滑蘸碟，风味更突出。', '2'),
(NULL, '丸类组合', '1-CE7I8934.jpg', '28', '由多种丸类组合而成。锅开后浮起来再煮3分钟左右即可食用。配上丸滑蘸碟，风味更突出。', '2'),
(NULL, '冻虾', 'CE7I7004.jpg', '50', '将活虾冷冻而成。肉质脆嫩，锅开后再煮4分钟左右即可食用。', '3'),
(NULL, '草鱼片', 'CE7I7005.jpg', '35', '选鲜活草鱼，切出鱼片冷鲜保存。锅开后再煮1分钟左右即可食用。', '3'),
(NULL, '鱿鱼须', 'CE7I9509.jpg', '41', '选用鱿鱼触角，速冻保鲜。锅开后再煮5分钟左右即可食用', '3'),
(NULL, '北极贝', 'CE7I5767.jpg', '30', '北极贝是源自北大西洋冰冷深海的一种贝类，肉质肥美，锅开后再煮4分钟左右即可食用', '3'),
(NULL, '包心生菜', 'baocai.jpg', '16', '经过挑选、清洗、装盘而成。口感清香，锅开后再煮1分钟左右即可食用', '4'),
(NULL, '蒿子秆', 'c1838.jpg', '20', '经过挑选、清洗、切配、装盘而成，锅开后再煮1分钟左右即可食用', '4'),
(NULL, '竹笋', 'c8811.jpg', '22', '竹笋清洗后对剖切开，装盘，口感脆爽，锅开后再煮4分钟左右即可食用', '4'),
(NULL, '土豆', 'c1834.jpg', '10', '经过去泥、挑选、去皮、清洗、切配、装盘而成。锅开后再煮4分钟左右即可食用', '4'),
(NULL, '有机香菇', 'j7712.jpg', '28', '经过挑选、清洗、装盘而成。锅开后再煮2分钟左右即可食用', '5'),
(NULL, '木耳', 'j8181.jpg', '24', '经过浸泡、挑选、装盘而成。锅开后再煮3分钟左右即可食用', '5'),
(NULL, '平菇', 'j5612.jpg', '22', '经过挑选、清洗、装盘而成。脆嫩而肥厚，锅开后再煮5分钟左右即可食用', '5'),
(NULL, '椎茸', 'j7715.jpg', '36', '经过清洗、切配、装盘而成。锅开后再煮4分钟左右即可食用', '5');


/*订单*/
CREATE TABLE xfn_order(
  oid INT PRIMARY KEY AUTO_INCREMENT,
  startTime BIGINT,
  endTime BIGINT,
  customerCount INT,
  tableId INT,
  FOREIGN KEY(tableId) REFERENCES xfn_table(tid)
);
INSERT INTO xfn_order VALUES
(100000, '1547800000000', '1547814918000', '2', '1'),
(NULL, '1547801000000', '1547824918000', '4', '2'),
(NULL, '1547802000000', '1547834918000', '3', '3'),
(NULL, '1547803000000', '1547844918000', '5', '5'),
(NULL, '1547804000000', '1547854918000', '8', '6'),
(NULL, '1547805000000', '1547864918000', '2', '7'),
(NULL, '1547806000000', '1547874918000', '1', '8'),
(NULL, '1547807000000', '1547884918000', '2', '9'),
(NULL, '1547808000000', '1547894918000', '6', '10'),
(NULL, '1547809000000', '1547804918000', '3', '11'),
(NULL, '1547800000000', '1547814918000', '10', '12'),
(NULL, '1547801000000', '1547824918000', '2', '13'),
(NULL, '1547802000000', '1547834918000', '4', '15'),
(NULL, '1547800000000', '1547814918000', '2', '1'),
(NULL, '1547801000000', '1547824918000', '4', '2'),
(NULL, '1547802000000', '1547834918000', '3', '3'),
(NULL, '1547803000000', '', '5', '5'),
(NULL, '1547804000000', '1547854918000', '8', '6'),
(NULL, '1547805000000', '', '2', '7'),
(NULL, '1547806000000', '1547874918000', '1', '8'),
(NULL, '1547807000000', '1547884918000', '2', '9'),
(NULL, '1547808000000', '', '6', '10'),
(NULL, '1547809000000', '1547804918000', '3', '11'),
(NULL, '1547800000000', '', '10', '12'),
(NULL, '1547801000000', '1547824918000', '2', '13'),
(NULL, '1547802000000', '', '4', '15');

/*订单详情*/
CREATE TABLE xfn_order_detail(
  oid INT PRIMARY KEY AUTO_INCREMENT,
  dishId INT,       /*菜品编号*/
  dishCount INT,    /*份数*/
  customerName VARCHAR(32),    /*顾客名称*/
  orderId INT,      /*订单编号*/
  FOREIGN KEY(dishId) REFERENCES xfn_dish(did),
  FOREIGN KEY(orderId) REFERENCES xfn_order(oid)
);
INSERT INTO xfn_order_detail VALUES
(NULL, '50', '2', '丁丁', '100000'),
(NULL, '24', '2', '丁丁', '100001'),
(NULL, '37', '1', '当当', '100002'),
(NULL, '18', '3', '豆豆', '100003'),
(NULL, '22', '1', '丫丫', '100004'),
(NULL, '21', '2', '丁丁', '100005'),
(NULL, '36', '1', '当当', '100006'),
(NULL, '1', '2', '豆豆', '100007'),
(NULL, '3', '2', '丫丫', '100008'),
(NULL, '11', '2', '丁丁', '100000'),
(NULL, '14', '2', '丁丁', '100001'),
(NULL, '27', '1', '当当', '100002'),
(NULL, '8', '3', '豆豆', '100003'),
(NULL, '42', '1', '丫丫', '100004'),
(NULL, '11', '2', '丁丁', '100005'),
(NULL, '16', '1', '当当', '100006'),
(NULL, '1', '2', '豆豆', '100007'),
(NULL, '3', '2', '丫丫', '100008'),
(NULL, '15', '2', '丁丁', '100009'),
(NULL, '4', '1', '当当', '100010'),
(NULL, '12', '3', '豆豆', '100011'),
(NULL, '9', '1', '丫丫', '100012'),
(NULL, '33', '2', '丁丁', '100013'),
(NULL, '24', '1', '当当', '100014'),
(NULL, '30', '3', '豆豆', '100015'),
(NULL, '20', '2', '丫丫', '100016'),
(NULL, '16', '4', '当当', '100017'),
(NULL, '8', '2', '丫丫', '100018'),
(NULL, '6', '2', '丁丁', '100019'),
(NULL, '5', '1', '当当', '100020'),
(NULL, '29', '1', '豆豆', '100021'),
(NULL, '27', '1', '丫丫', '100022'),
(NULL, '19', '5', '丁丁', '100023'),
(NULL, '16', '1', '当当', '100024'),
(NULL, '11', '1', '豆豆', '100025'),
(NULL, '8', '2', '丫丫', '100016'),
(NULL, '16', '1', '当当', '100017'),
(NULL, '2', '3', '丫丫', '100018'),
(NULL, '1', '2', '丁丁', '100019'),
(NULL, '3', '1', '当当', '100020'),
(NULL, '29', '2', '豆豆', '100021'),
(NULL, '8', '1', '丫丫', '100022'),
(NULL, '7', '4', '丁丁', '100023'),
(NULL, '16', '6', '当当', '100024'),
(NULL, '28', '3', '豆豆', '100025'),
(NULL, '2', '3', '丫丫', '100018'),
(NULL, '42', '2', '丁丁', '100019'),
(NULL, '11', '1', '当当', '100020'),
(NULL, '19', '2', '豆豆', '100021'),
(NULL, '17', '1', '丫丫', '100022'),
(NULL, '12', '4', '丁丁', '100023'),
(NULL, '35', '6', '当当', '100024'),
(NULL, '31', '3', '豆豆', '100025'),
(NULL, '1', '3', '丫丫', '100018'),
(NULL, '2', '1', '丁丁', '100019'),
(NULL, '3', '1', '当当', '100020'),
(NULL, '32', '4', '丁丁', '100023'),
(NULL, '47', '6', '当当', '100024'),
(NULL, '41', '3', '豆豆', '100025'),
(NULL, '2', '3', '丫丫', '100018'),
(NULL, '42', '2', '丁丁', '100019'),
(NULL, '43', '1', '当当', '100020'),
(NULL, '44', '2', '豆豆', '100021'),
(NULL, '48', '1', '丫丫', '100022'),
(NULL, '46', '4', '丁丁', '100023'),
(NULL, '49', '2', '当当', '100024'),
(NULL, '40', '3', '豆豆', '100025'),
(NULL, '31', '1', '丫丫', '100022'),
(NULL, '37', '2', '丁丁', '100023'),
(NULL, '7', '1', '当当', '100024'),
(NULL, '10', '3', '豆豆', '100025'),
(NULL, '39', '1', '丫丫', '100022'),
(NULL, '32', '2', '丁丁', '100023'),
(NULL, '35', '2', '丁丁', '100023'),
(NULL, '9', '1', '当当', '100024'),
(NULL, '50', '3', '豆豆', '100025'),
(NULL, '39', '1', '丫丫', '100022'),
(NULL, '4', '2', '丁丁', '100023'),
(NULL, '31', '2', '丁丁', '100023'),
(NULL, '7', '1', '当当', '100024'),
(NULL, '30', '3', '豆豆', '100025'),
(NULL, '32', '1', '丫丫', '100022'),
(NULL, '41', '2', '丁丁', '100023'),
(NULL, '17', '1', '当当', '100024'),
(NULL, '20', '3', '豆豆', '100025'),
(NULL, '3', '1', '丫丫', '100022'),
(NULL, '4', '2', '丁丁', '100023'),
(NULL, '8', '1', '当当', '100024'),
(NULL, '29', '3', '豆豆', '100025');
